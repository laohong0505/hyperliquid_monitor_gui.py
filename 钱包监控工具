    while RUNNING:
        try:
            app.log_text.insert(tk.END, f"â±ï¸ æ­£åœ¨æ£€æŸ¥é’±åŒ…...\n")
            app.log_text.see(tk.END)
            bot_token = app.bot_token_var.get().strip()
            chat_id = app.chat_id_var.get().strip()
            interval = int(app.interval_var.get())
            wallets = [w.get().strip() for w in app.wallet_vars if w.get().strip()]

            for addr in wallets:
                result = fetch_wallet_activity(addr)
                if result:
                    send_telegram(bot_token, chat_id, result)
                    app.log_text.insert(tk.END, f"ğŸ“¡ {result}\n")
                    app.log_text.see(tk.END)
            time.sleep(interval)
        except Exception as e:
            app.log_text.insert(tk.END, f"âš ï¸ å‘ç”Ÿé”™è¯¯: {e}\n")
            app.log_text.see(tk.END)
            time.sleep(5)

# ========== å›¾å½¢ç•Œé¢ ==========
class MonitorApp:
    def __init__(self, root):
        self.root = root
        self.root.title("ğŸ” Hyperliquid é“¾ä¸Šç›‘æ§ç³»ç»Ÿ")
        self.root.geometry("640x600")
        self.root.resizable(False, False)

        main_frame = ttk.Frame(root, padding=10)
        main_frame.pack(fill="both", expand=True)

        # Telegram è®¾ç½®
        ttk.Label(main_frame, text="Bot Token:").grid(row=0, column=0, sticky="w")
        self.bot_token_var = tk.StringVar()
        ttk.Entry(main_frame, textvariable=self.bot_token_var, width=55).grid(row=0, column=1, sticky="w")

        ttk.Label(main_frame, text="Chat ID:").grid(row=1, column=0, sticky="w")
        self.chat_id_var = tk.StringVar()
        ttk.Entry(main_frame, textvariable=self.chat_id_var, width=55).grid(row=1, column=1, sticky="w")

        # é’±åŒ…åœ°å€
        ttk.Label(main_frame, text="ç›‘æ§é’±åŒ…åœ°å€ï¼ˆæœ€å¤š10ä¸ªï¼‰:").grid(row=2, column=0, sticky="w", pady=(10, 0))
        self.wallet_vars = []
        for i in range(10):
            var = tk.StringVar()
            self.wallet_vars.append(var)
            ttk.Entry(main_frame, textvariable=var, width=55).grid(row=3+i, column=1, sticky="w")

        # åˆ·æ–°é—´éš”
        ttk.Label(main_frame, text="åˆ·æ–°é—´éš”(ç§’):").grid(row=14, column=0, sticky="w", pady=(10, 0))
        self.interval_var = tk.StringVar(value="30")
        ttk.Entry(main_frame, textvariable=self.interval_var, width=10).grid(row=14, column=1, sticky="w")

        # æ§åˆ¶æŒ‰é’®
        btn_frame = ttk.Frame(main_frame)
        btn_frame.grid(row=15, column=1, pady=10, sticky="w")

        self.start_btn = ttk.Button(btn_frame, text="ğŸŸ¢ å¼€å§‹ç›‘æ§", command=self.start_monitor)
        self.start_btn.pack(side="left", padx=5)
        self.stop_btn = ttk.Button(btn_frame, text="ğŸ”´ åœæ­¢ç›‘æ§", command=self.stop_monitor, state="disabled")
        self.stop_btn.pack(side="left", padx=5)

        # æ—¥å¿—æ˜¾ç¤º
        ttk.Label(main_frame, text="æ—¥å¿—è¾“å‡º:").grid(row=16, column=0, sticky="nw", pady=(10, 0))
        self.log_text = scrolledtext.ScrolledText(main_frame, width=70, height=15, wrap=tk.WORD)
        self.log_text.grid(row=16, column=1, pady=(5, 0))

        # åŠ è½½é…ç½®
        self.load_config()

    def start_monitor(self):
        global RUNNING
        if RUNNING:
            return
        RUNNING = True
        self.start_btn.config(state="disabled")
        self.stop_btn.config(state="normal")
        self.save_config()
        t = threading.Thread(target=monitor_thread, args=(self,), daemon=True)
        t.start()
        self.log_text.insert(tk.END, "âœ… ç›‘æ§å·²å¯åŠ¨...\n")

    def stop_monitor(self):
        global RUNNING
        RUNNING = False
        self.start_btn.config(state="normal")
        self.stop_btn.config(state="disabled")
        self.log_text.insert(tk.END, "ğŸ›‘ å·²åœæ­¢ç›‘æ§ã€‚\n")

    def save_config(self):
        data = {
            "bot_token": self.bot_token_var.get(),
            "chat_id": self.chat_id_var.get(),
            "interval": self.interval_var.get(),
            "wallets": [v.get() for v in self.wallet_vars],
        }
        with open(CONFIG_FILE, "w", encoding="utf-8") as f:
            json.dump(data, f, ensure_ascii=False, indent=2)

    def load_config(self):
        if os.path.exists(CONFIG_FILE):
            with open(CONFIG_FILE, "r", encoding="utf-8") as f:
                data = json.load(f)
            self.bot_token_var.set(data.get("bot_token", ""))
            self.chat_id_var.set(data.get("chat_id", ""))
            self.interval_var.set(str(data.get("interval", "30")))
            wallets = data.get("wallets", [])
            for i, addr in enumerate(wallets):
                if i < len(self.wallet_vars):
                    self.wallet_vars[i].set(addr)

if __name__ == "__main__":
    root = tk.Tk()
    app = MonitorApp(root)
    root.mainloop()
fdcfdc
